<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Documentation - PKS Management System</title>
    <link rel="stylesheet" href="css/documentation.css">
</head>

<body>
    <div class="container">
        <nav class="sidebar">
            <div class="sidebar-header">
                <h2>üìö API Docs</h2>
                <span class="version">v1.0.0</span>
            </div>

            <div class="nav-section">
                <h3>Getting Started</h3>
                <ul>
                    <li><a href="#overview" class="nav-link">Overview</a></li>
                    <li><a href="#authentication" class="nav-link">Authentication</a></li>
                    <li><a href="#base-url" class="nav-link">Base URL</a></li>
                    <li><a href="#rate-limiting" class="nav-link">Rate Limiting</a></li>
                </ul>
            </div>

            <div class="nav-section">
                <h3>Endpoints</h3>
                <ul>
                    <li>
                        <a href="#auth-endpoints" class="nav-link">üîê Authentication</a>
                        <ul class="sub-nav">
                            <li><a href="#register">Register</a></li>
                            <li><a href="#login">Login</a></li>
                            <li><a href="#profile">Profile</a></li>
                            <li><a href="#change-password">Change Password</a></li>
                            <li><a href="#logout">Logout</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="#pks-endpoints" class="nav-link">üìÑ PKS Management</a>
                        <ul class="sub-nav">
                            <li><a href="#create-pks">Create PKS</a></li>
                            <li><a href="#get-all-pks">Get All PKS</a></li>
                            <li><a href="#get-pks">Get PKS</a></li>
                            <li><a href="#update-pks">Update PKS</a></li>
                            <li><a href="#delete-pks">Delete PKS</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="#file-endpoints" class="nav-link">üìÅ File Operations</a>
                        <ul class="sub-nav">
                            <li><a href="#upload-file">Upload File</a></li>
                            <li><a href="#download-file">Download File</a></li>
                            <li><a href="#delete-file">Delete File</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="#document-endpoints" class="nav-link">üìù Document Generation</a>
                    </li>
                    <li>
                        <a href="#email-endpoints" class="nav-link">üìß Email & Reminders</a>
                    </li>
                </ul>
            </div>

            <div class="nav-section">
                <h3>Models</h3>
                <ul>
                    <li><a href="#admin-model" class="nav-link">Admin Model</a></li>
                    <li><a href="#pks-model" class="nav-link">PKS Model</a></li>
                </ul>
            </div>
        </nav>

        <main class="main-content">
            <header class="header">
                <h1>PKS Management System API Documentation</h1>
                <p>Complete REST API documentation for PKS (Perjanjian Kerja Sama) Management System</p>
            </header>

            <section id="overview" class="content-section">
                <h2>Overview</h2>
                <div class="info-box">
                    <p>PKS Management System API provides endpoints for managing cooperation agreements (PKS), including
                        CRUD operations, file management, and document generation.</p>
                    <div class="features">
                        <h4>Key Features:</h4>
                        <ul>
                            <li>‚úÖ JWT Authentication</li>
                            <li>‚úÖ Auto-numbering for PKS documents</li>
                            <li>‚úÖ PDF file upload/download (max 10MB)</li>
                            <li>‚úÖ Document generation (.docx format)</li>
                            <li>‚úÖ Rate limiting for security</li>
                            <li>‚úÖ Role-based access control</li>
                        </ul>
                    </div>
                </div>
            </section>

            <section id="base-url" class="content-section">
                <h2>Base URL</h2>
                <div class="code-block">
                    <code>http://localhost:3000/api</code>
                    <button class="copy-btn" onclick="copyToClipboard('http://localhost:3000/api')">Copy</button>
                </div>
                <p class="note">All API endpoints are prefixed with <code>/api</code></p>
            </section>

            <section id="authentication" class="content-section">
                <h2>Authentication</h2>
                <div class="info-box">
                    <p>This API uses JWT (JSON Web Token) for authentication. Include the token in the Authorization
                        header:</p>
                    <div class="code-block">
                        <code>Authorization: Bearer YOUR_JWT_TOKEN</code>
                    </div>
                    <p class="note">‚ö†Ô∏è Protected routes require valid JWT token</p>
                </div>
            </section>

            <section id="rate-limiting" class="content-section">
                <h2>Rate Limiting</h2>
                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th>Endpoint Type</th>
                                <th>Limit</th>
                                <th>Window</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Authentication (login/register)</td>
                                <td>5 requests</td>
                                <td>15 minutes</td>
                            </tr>
                            <tr>
                                <td>General API</td>
                                <td>100 requests</td>
                                <td>15 minutes</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <section id="auth-endpoints" class="content-section">
                <h2>üîê Authentication Endpoints</h2>

                <div id="register" class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="method method-post">POST</span>
                        <span class="endpoint-path">/auth/register</span>
                        <span class="badge badge-public">Public</span>
                    </div>
                    <div class="endpoint-body">
                        <p>Register a new admin account</p>

                        <h4>Request Body:</h4>
                        <div class="code-block">
                            <pre>{
  "username": "johndoe",
  "email": "john@example.com",
  "password": "securePassword123",
  "nama": "John Doe"
}</pre>
                        </div>

                        <h4>Response (201 Created):</h4>
                        <div class="code-block">
                            <pre>{
  "success": true,
  "message": "Admin berhasil didaftarkan",
  "data": {
    "id": "507f1f77bcf86cd799439011",
    "username": "johndoe",
    "email": "john@example.com",
    "nama": "John Doe",
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
  }
}</pre>
                        </div>

                        <h4>Validation Rules:</h4>
                        <ul class="validation-list">
                            <li>Username: min 3 characters, alphanumeric and underscore only</li>
                            <li>Email: valid email format</li>
                            <li>Password: min 6 characters</li>
                            <li>Nama: required, not empty</li>
                        </ul>
                    </div>
                </div>

                <div id="login" class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="method method-post">POST</span>
                        <span class="endpoint-path">/auth/login</span>
                        <span class="badge badge-public">Public</span>
                    </div>
                    <div class="endpoint-body">
                        <p>Login with username and password</p>

                        <h4>Request Body:</h4>
                        <div class="code-block">
                            <pre>{
  "username": "johndoe",
  "password": "securePassword123"
}</pre>
                        </div>

                        <h4>Response (200 OK):</h4>
                        <div class="code-block">
                            <pre>{
  "success": true,
  "message": "Login berhasil",
  "data": {
    "id": "507f1f77bcf86cd799439011",
    "username": "johndoe",
    "email": "john@example.com",
    "nama": "John Doe",
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
  }
}</pre>
                        </div>
                    </div>
                </div>

                <div id="profile" class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="method method-get">GET</span>
                        <span class="endpoint-path">/auth/me</span>
                        <span class="badge badge-protected">Protected</span>
                    </div>
                    <div class="endpoint-body">
                        <p>Get current admin profile</p>

                        <h4>Headers:</h4>
                        <div class="code-block">
                            <pre>Authorization: Bearer YOUR_JWT_TOKEN</pre>
                        </div>

                        <h4>Response (200 OK):</h4>
                        <div class="code-block">
                            <pre>{
  "success": true,
  "data": {
    "id": "507f1f77bcf86cd799439011",
    "username": "johndoe",
    "email": "john@example.com",
    "nama": "John Doe",
    "isActive": true,
    "createdAt": "2024-01-01T00:00:00.000Z"
  }
}</pre>
                        </div>
                    </div>
                </div>

                <div id="change-password" class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="method method-patch">PATCH</span>
                        <span class="endpoint-path">/auth/change-password</span>
                        <span class="badge badge-protected">Protected</span>
                    </div>
                    <div class="endpoint-body">
                        <p>Change admin password</p>

                        <h4>Request Body:</h4>
                        <div class="code-block">
                            <pre>{
  "currentPassword": "oldPassword123",
  "newPassword": "newSecurePassword456"
}</pre>
                        </div>

                        <h4>Response (200 OK):</h4>
                        <div class="code-block">
                            <pre>{
  "success": true,
  "message": "Password berhasil diubah"
}</pre>
                        </div>
                    </div>
                </div>

                <div id="logout" class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="method method-post">POST</span>
                        <span class="endpoint-path">/auth/logout</span>
                        <span class="badge badge-protected">Protected</span>
                    </div>
                    <div class="endpoint-body">
                        <p>Logout current admin</p>

                        <h4>Response (200 OK):</h4>
                        <div class="code-block">
                            <pre>{
  "success": true,
  "message": "Logout berhasil"
}</pre>
                        </div>
                    </div>
                </div>
            </section>

            <section id="pks-endpoints" class="content-section">
                <h2>üìÑ PKS Management Endpoints</h2>

                <div id="create-pks" class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="method method-post">POST</span>
                        <span class="endpoint-path">/pks</span>
                        <span class="badge badge-public">Public</span>
                    </div>
                    <div class="endpoint-body">
                        <p>Create a new PKS document with auto-generated number</p>

                        <h4>Request Body:</h4>
                        <div class="code-block">
                            <pre>{
  "content": {
    "judul": "Kerjasama Pengembangan Sistem",
    "tanggal": "2024-01-15",
    "tanggalKadaluarsa": "2025-01-15"
  },
  "pihakKedua": {
    "instansi": "PT. Technology Indonesia",
    "nama": "Budi Santoso",
    "jabatan": "Direktur Utama",
    "alamat": "Jl. Sudirman No. 123, Jakarta",
    "nomor": "001/DIR/2024"
  },
  "properties": {
    "status": "draft",
    "comment": "Initial draft",
    "email": "admin@techindo.com",
    "reminderDate": "2024-12-15"
  }
}</pre>
                        </div>

                        <h4>Response (201 Created):</h4>
                        <div class="code-block">
                            <pre>{
  "message": "PKS created successfully",
  "data": {
    "_id": "507f1f77bcf86cd799439011",
    "content": {
      "nomor": "PKS-2024-0001",
      "judul": "Kerjasama Pengembangan Sistem",
      "tanggal": "2024-01-15T00:00:00.000Z",
      "tanggalKadaluarsa": "2025-01-15T00:00:00.000Z"
    },
    "pihakKedua": { ... },
    "properties": { ... },
    "fileUpload": {
      "docName": "",
      "fileName": ""
    },
    "createdAt": "2024-01-15T10:00:00.000Z"
  }
}</pre>
                        </div>
                    </div>
                </div>

                <div id="get-all-pks" class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="method method-get">GET</span>
                        <span class="endpoint-path">/pks</span>
                        <span class="badge badge-public">Public</span>
                    </div>
                    <div class="endpoint-body">
                        <p>Get all PKS documents with pagination</p>

                        <h4>Query Parameters:</h4>
                        <div class="table-wrapper">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Parameter</th>
                                        <th>Type</th>
                                        <th>Default</th>
                                        <th>Description</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>status</td>
                                        <td>String</td>
                                        <td>-</td>
                                        <td>Filter by status (draft, menunggu dokumen, menunggu review, approved,
                                            rejected)</td>
                                    </tr>
                                    <tr>
                                        <td>page</td>
                                        <td>Number</td>
                                        <td>1</td>
                                        <td>Page number</td>
                                    </tr>
                                    <tr>
                                        <td>limit</td>
                                        <td>Number</td>
                                        <td>10</td>
                                        <td>Items per page</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <h4>Example Request:</h4>
                        <div class="code-block">
                            <code>GET /api/pks?status=approved&page=1&limit=20</code>
                        </div>

                        <h4>Response (200 OK):</h4>
                        <div class="code-block">
                            <pre>{
  "data": [
    {
      "_id": "507f1f77bcf86cd799439011",
      "content": { ... },
      "pihakKedua": { ... },
      "properties": { ... }
    }
  ],
  "pagination": {
    "total": 50,
    "page": 1,
    "limit": 20
  }
}</pre>
                        </div>
                    </div>
                </div>

                <div id="get-pks" class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="method method-get">GET</span>
                        <span class="endpoint-path">/pks/:nomor</span>
                        <span class="badge badge-public">Public</span>
                    </div>
                    <div class="endpoint-body">
                        <p>Get PKS document by nomor</p>

                        <h4>Path Parameters:</h4>
                        <ul>
                            <li><code>nomor</code> - PKS document number (e.g., PKS-2024-0001)</li>
                        </ul>

                        <h4>Alternative Endpoint (by ID):</h4>
                        <div class="code-block">
                            <code>GET /api/pks/byid/:id</code>
                        </div>
                    </div>
                </div>

                <div id="update-pks" class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="method method-patch">PATCH</span>
                        <span class="endpoint-path">/pks/:nomor</span>
                        <span class="badge badge-protected">Protected</span>
                    </div>
                    <div class="endpoint-body">
                        <p>Update PKS document</p>

                        <h4>Request Body:</h4>
                        <div class="code-block">
                            <pre>{
  "properties": {
    "status": "approved",
    "comment": "Approved by director"
  }
}</pre>
                        </div>

                        <h4>Alternative Endpoint (by ID):</h4>
                        <div class="code-block">
                            <code>PATCH /api/pks/byid/:id</code>
                        </div>
                    </div>
                </div>

                <div id="delete-pks" class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="method method-delete">DELETE</span>
                        <span class="endpoint-path">/pks/:nomor</span>
                        <span class="badge badge-protected">Protected</span>
                    </div>
                    <div class="endpoint-body">
                        <p>Delete PKS document and associated files</p>

                        <h4>Response (200 OK):</h4>
                        <div class="code-block">
                            <pre>{
  "message": "PKS and associated file deleted successfully",
  "nomor": "PKS-2024-0001"
}</pre>
                        </div>

                        <h4>Alternative Endpoint (by ID):</h4>
                        <div class="code-block">
                            <code>DELETE /api/pks/byid/:id</code>
                        </div>
                    </div>
                </div>
            </section>

            <section id="file-endpoints" class="content-section">
                <h2>üìÅ File Operations</h2>

                <div id="upload-file" class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="method method-post">POST</span>
                        <span class="endpoint-path">/pks/:nomor/file</span>
                        <span class="badge badge-public">Public</span>
                    </div>
                    <div class="endpoint-body">
                        <p>Upload PDF file for PKS document</p>

                        <h4>Request:</h4>
                        <ul>
                            <li>Content-Type: <code>multipart/form-data</code></li>
                            <li>Field name: <code>file</code></li>
                            <li>Max size: <code>10MB</code></li>
                            <li>Allowed type: <code>PDF only</code></li>
                        </ul>

                        <h4>cURL Example:</h4>
                        <div class="code-block">
                            <pre>curl -X POST http://localhost:3000/api/pks/PKS-2024-0001/file \
  -F "file=@/path/to/document.pdf"</pre>
                        </div>

                        <h4>Response (200 OK):</h4>
                        <div class="code-block">
                            <pre>{
  "message": "File uploaded successfully",
  "data": {
    "nomor": "PKS-2024-0001",
    "docName": "document.pdf",
    "fileName": "uploadedfile_PKS-2024-0001.pdf"
  }
}</pre>
                        </div>

                        <h4>Alternative Endpoint (by ID):</h4>
                        <div class="code-block">
                            <code>POST /api/pks/byid/:id/file</code>
                        </div>
                    </div>
                </div>

                <div id="download-file" class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="method method-get">GET</span>
                        <span class="endpoint-path">/pks/:nomor/file</span>
                        <span class="badge badge-public">Public</span>
                    </div>
                    <div class="endpoint-body">
                        <p>Download PDF file for PKS document</p>

                        <h4>Response:</h4>
                        <p>Binary PDF file with appropriate headers for download</p>

                        <h4>Alternative Endpoint (by ID):</h4>
                        <div class="code-block">
                            <code>GET /api/pks/byid/:id/file</code>
                        </div>
                    </div>
                </div>

                <div id="delete-file" class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="method method-delete">DELETE</span>
                        <span class="endpoint-path">/pks/:nomor/file</span>
                        <span class="badge badge-protected">Protected</span>
                    </div>
                    <div class="endpoint-body">
                        <p>Delete uploaded file for PKS document</p>

                        <h4>Response (200 OK):</h4>
                        <div class="code-block">
                            <pre>{
  "message": "File deleted successfully",
  "nomor": "PKS-2024-0001"
}</pre>
                        </div>

                        <h4>Alternative Endpoint (by ID):</h4>
                        <div class="code-block">
                            <code>DELETE /api/pks/byid/:id/file</code>
                        </div>
                    </div>
                </div>
            </section>

            <section id="document-endpoints" class="content-section">
                <h2>üìù Document Generation</h2>

                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="method method-get">GET</span>
                        <span class="endpoint-path">/pks/:nomor/generate</span>
                        <span class="badge badge-public">Public</span>
                    </div>
                    <div class="endpoint-body">
                        <p>Generate PKS document in .docx format</p>

                        <h4>Response:</h4>
                        <p>Binary .docx file with complete PKS agreement content</p>

                        <h4>Generated Document Includes:</h4>
                        <ul>
                            <li>Agreement header with both parties information</li>
                            <li>Auto-formatted date in Indonesian format</li>
                            <li>Complete agreement articles (Pasal 1-8)</li>
                            <li>Signature placeholders</li>
                        </ul>

                        <h4>Example Usage:</h4>
                        <div class="code-block">
                            <pre>// Browser download
window.location.href = '/api/pks/PKS-2024-0001/generate';

// Or with fetch
fetch('/api/pks/PKS-2024-0001/generate')
  .then(response => response.blob())
  .then(blob => {
    const url = window.URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'PKS-2024-0001.docx';
    a.click();
  });</pre>
                        </div>
                    </div>
                </div>
            </section>

            <section id="email-endpoints" class="content-section">
                <h2>üìß Email & Reminder Operations</h2>
                <p class="note">These endpoints are public and do not require admin authentication.</p>

                <div id="start-reminder" class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="method method-post">POST</span>
                        <span class="endpoint-path">/pks/byid/:id/reminders/start</span>
                        <span class="badge badge-public">Public</span>
                    </div>
                    <div class="endpoint-body">
                        <p>Starts the email reminder sequence for a PKS document. The first email is sent immediately,
                            and subsequent emails are scheduled by the server's cron job.</p>

                        <h4>Path Parameters:</h4>
                        <ul>
                            <li><code>id</code> - The unique ID of the PKS document.</li>
                        </ul>

                        <h4>Response (200 OK):</h4>
                        <div class="code-block">
                            <pre>{
  "message": "Reminder successfully started and first email sent",
  "data": { ... updated PKS object ... }
}</pre>
                        </div>
                    </div>
                </div>

                <div id="stop-reminder" class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="method method-post">POST</span>
                        <span class="endpoint-path">/pks/byid/:id/reminders/stop</span>
                        <span class="badge badge-public">Public</span>
                    </div>
                    <div class="endpoint-body">
                        <p>Stops an active email reminder sequence for a PKS document. No further reminder emails will
                            be sent.</p>

                        <h4>Path Parameters:</h4>
                        <ul>
                            <li><code>id</code> - The unique ID of the PKS document.</li>
                        </ul>

                        <h4>Response (200 OK):</h4>
                        <div class="code-block">
                            <pre>{
  "message": "Reminder successfully stopped",
  "data": { ... updated PKS object ... }
}</pre>
                        </div>
                    </div>
                </div>

                <div id="status-notification" class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="method method-post">POST</span>
                        <span class="endpoint-path">/pks/byid/:id/status-notification</span>
                        <span class="badge badge-public">Public</span>
                    </div>
                    <div class="endpoint-body">
                        <p>Sends a one-time email notification to the recipient associated with the PKS, informing them
                            of the document's current status.</p>

                        <h4>Path Parameters:</h4>
                        <ul>
                            <li><code>id</code> - The unique ID of the PKS document.</li>
                        </ul>

                        <h4>Response (200 OK):</h4>
                        <div class="code-block">
                            <pre>{
  "message": "Status change notification sent successfully"
}</pre>
                        </div>
                    </div>
                </div>
            </section>


            <section id="admin-model" class="content-section">
                <h2>Admin Model</h2>
                <div class="code-block">
                    <pre>{
  "username": "String (required, unique, min: 3)",
  "email": "String (required, unique, lowercase)",
  "password": "String (required, min: 6, hashed)",
  "nama": "String (required)",
  "isActive": "Boolean (default: true)",
  "createdAt": "Date (auto)",
  "updatedAt": "Date (auto)"
}</pre>
                </div>
            </section>

            <section id="pks-model" class="content-section">
                <h2>PKS Model</h2>
                <div class="code-block">
                    <pre>{
  "content": {
    "nomor": "String (unique, immutable, auto-generated)",
    "judul": "String (required)",
    "tanggal": "Date (required)",
    "tanggalKadaluarsa": "Date"
  },
  "pihakKedua": {
    "instansi": "String (required)",
    "nama": "String (required)",
    "jabatan": "String (required)",
    "alamat": "String (required)",
    "nomor": "String"
  },
  "properties": {
    "uploadDate": "Date (default: now)",
    "status": "String (enum: draft, menunggu dokumen, menunggu review, approved, rejected)",
    "comment": "String",
    "email": "String (required, valid email)",
    "reminderDate": "Date",
    "notificationsSent": "Number (default: 0)",
    "lastNotificationDate": "Date",
    "isReminderActive": "Boolean (default: true)"
  },
  "fileUpload": {
    "docName": "String (original filename)",
    "fileName": "String (server filename)"
  },
  "createdAt": "Date (auto)",
  "updatedAt": "Date (auto)"
}</pre>
                </div>
            </section>

            <section class="content-section">
                <h2>Error Responses</h2>
                <div class="info-box error-box">
                    <h4>Common HTTP Status Codes:</h4>
                    <ul>
                        <li><strong>400 Bad Request</strong> - Invalid request data or validation error</li>
                        <li><strong>401 Unauthorized</strong> - Missing or invalid authentication token</li>
                        <li><strong>404 Not Found</strong> - Resource not found</li>
                        <li><strong>429 Too Many Requests</strong> - Rate limit exceeded</li>
                        <li><strong>500 Internal Server Error</strong> - Server error</li>
                    </ul>

                    <h4>Error Response Format:</h4>
                    <div class="code-block">
                        <pre>{
  "success": false,
  "message": "Error description",
  "error": "Detailed error message (in development)",
  "errors": [  // For validation errors
    {
      "field": "email",
      "message": "Email tidak valid"
    }
  ]
}</pre>
                    </div>
                </div>
            </section>

            <footer class="footer">
                <p>PKS Management System API v1.0.0 | ¬© 2024 LPPM UPN Veteran Yogyakarta</p>
            </footer>
        </main>
    </div>

    <script>
        // Copy to clipboard function
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                const btn = event.target;
                const originalText = btn.textContent;
                btn.textContent = 'Copied!';
                btn.classList.add('copied');
                setTimeout(() => {
                    btn.textContent = originalText;
                    btn.classList.remove('copied');
                }, 2000);
            });
        }

        // Smooth scrolling for navigation
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const targetId = link.getAttribute('href');
                const target = document.querySelector(targetId);
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });

                    // Update active state
                    document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
                    link.classList.add('active');
                }
            });
        });

        // Highlight current section on scroll
        const observerOptions = {
            root: null,
            rootMargin: '-100px 0px -70% 0px',
            threshold: 0
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const id = entry.target.id;
                    const link = document.querySelector(`.nav-link[href="#${id}"]`);
                    if (link) {
                        document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
                        link.classList.add('active');
                    }
                }
            });
        }, observerOptions);

        document.querySelectorAll('section[id]').forEach(section => {
            observer.observe(section);
        });
    </script>
</body>

</html>